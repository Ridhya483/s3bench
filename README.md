[![Codacy Badge](https://api.codacy.com/project/badge/Grade/f0def607de884e2098570eae7b3f3e5e)](https://app.codacy.com/gh/Seagate/s3bench?utm_source=github.com&utm_medium=referral&utm_content=Seagate/s3bench&utm_campaign=Badge_Grade_Settings) [![License](https://img.shields.io/badge/License-MIT-blue.svg)](https://github.com/Seagate/s3bench/blob/main/LICENSE) [![Slack](https://img.shields.io/badge/chat-on%20Slack-blue")](https://join.slack.com/t/cortxcommunity/shared_invite/zt-femhm3zm-yiCs5V9NBxh89a_709FFXQ?) [![YouTube](https://img.shields.io/badge/Video-YouTube-red)](https://cortx.link/videos)


# Initial
Cloned from
```
https://github.com/igneous-systems/s3bench.git
```

**Works only on machines having the DAOS/CEPH deployment and not a client s3bench machine**


# Prerequisites 
Install s3bench on your machine. Check https://github.com/Seagate/s3bench for the steps.
Export path of s3bench
```
export PATH=root/go/bin:$PATH
```
Add this to ```~/.bashrc```

Run :
```
s3bench -h
```
Add ```$CEPH_PATH``` or ```$CORTX_RGW``` paths to ```~/.bashrc```


# How to use 
Clone this branch of the repo 

```
git clone https://github.com/Ridhya483/s3bench.git -b perf-testing
```
Go to ```s3iotest``` directory
```
cd s3iotest
```
Edit the ```s3iotest.sh``` and uncomment :

a) If building for DAOS 
```
cd $CEPH_PATH/build
```
b) If building for MOTR
```
cd $CORTX_RGW/build
```
Change the ```OBJ_SIZE``` , ```SAMPLES``` , ```CLIENTS``` and ```LOOP_COUNT``` accordingly.  

Change file permissions 
```
chmod 777 s3iotest.sh
```
Run the script.

After the script is executed , the following directories and files will be generated in ```$CEPH_PATH/build``` or ```$CORTX_RGW/build```


|        **Path**        |       **Description**       |
|:----------------------:|:---------------------------:|
|       s3user.txt       |         S3 user info        |
| /s3tests/s3bench-*.log |  logs generated by s3bench  |
|  /s3tests/perf-reports | performance stats generated |



**Incase running the script again without a backend format , comment the s3user creation command in the script (line 14)** 




